# Моя раскладка для ErgoDox EZ

![](https://funkyimg.com/i/2LSSg.png)

Фичи раскладки:

* Раскладка для английского: модифицированный дворак для программистов; раскладка для русского: модифицированный йцукен с элементами дворака для программистов. Раскладки задаются в клавиатуре.
* Работает на любом компьютере, где имеются стандартные раскладки QWERTY, ЙЦУКЕН, где одна раскладка для всех окон, переключение языка на Alt+Shift.
* Inverted Shift модификатор для клавиш - это такой модификатор, при котором, если нажат шифт, для этой клавиши шифт отпускается, а затем снова возвращается. Он используется на шифтовом слое английской и русской раскладки, в частности чтобы набирать цифры при зажатом шифте.
* Залипающий шифт - если нажать шифт, а затем отпустить, то он применится к следующей клавише, если прошло менее 1 секунды.
* Запятая с автопробелом.
* Точка с автопробелом и автозалипающим шифтом.
* При нажатии Ctrl, Alt, Win, включается английский слой, и соответственно все модификаторы нажимаются так, как будто сейчас английская раскладка, даже если на самом деле русская.
* Текущий слой, язык или действие залипающего шифта показывается при помощи светодиодов.

Философия раскладки:

* Доступ к стрелкам осуществляется через слой, при этом стрелки находятся на домашней позиции, что не требует перемещения руки для перемещения курсора.
* Стрелки расположены не в форме перевернутой буквы T, а по горизонтали. Сделано это для того, чтобы не двигать пальцы вверх-вниз, а так же для того, чтобы снизу разместить дубликаты стрелок с нажатым контролом. Стрелки с нажатым контролом использую очень часто, для передвижения по словам, а так же очень быстро переключаюсь с обычных стрелок на стрелки с контролом, что невозможно делать, не будь этих клавиш, ведь невозможно настолько быстро нажимать и отпускать контрол.
* Вверху стрелок есть клавиши Home, End, Page Up, Page Down. Логичней было бы их разместить по-другому: Home, Page Up, Page Down, End, но уже так есть, и я к этому привык.
* Имеются отдельные кнопки для копирования и вставки. Это позволяет намного быстрее редактировать текст и код.
* Имеется отдельная клавиша Ctrl+Z, которая расположена симметрично Esc.
* Любое нажатие модификаторов, кроме Shift, считается грехом, поэтому все частые комбинации с модификаторами вынесены в отдельные слои, в частности красный и зелёный. Благодаря этому я практически никогда не использую Ctrl, Win, Alt.
* На цифровом ряду находятся не цифры, а все небуквенные символы, потому что они нажимаются чаще, чем цифры, цифры же в свою очередь нажимаются только с шифтом.
* На картинке раскладки цвет каждой клавиши означает то, каким пальцем эта клавиша будет нажиматься. Все соотношения цветов и пальцев вполне очевидны, кроме бирюзового. Это цвет клавиш, которые не будут нажиматься из домашней позиции, то есть будут нажиматься любым пальцем, какой попдается под руку, обычно глядя на клавиатуру. Остальные же клавиши нажимаются строго из домашней позиции, не глядя на клавиатуру. Наличие таких клавиш по моему мнению означает, что клавиатура спроектирована недостаточно хорошо для слепого набора, что не все клавиши удобно нажимать из домашней позиции, и такие клавиши надо либо располагать отдельно от основной клавиатуры, как это делается с нумпадом в обычной клавиатуре.

[Аккаунт на клавогонках.](http://klavogonki.ru/u/#/517589/)

# Костыли

Для того, чтобы после автошифта его индикатор горел ровно необходимое число секунд, нужно добавить следующий код в qmk:

В `tmk_core/common/keyboard.h`:
```diff
// ...
+void user_timer(void);
// ...
```

В `tmk_core/common/keyboard.c`:
```diff
// ...
void keyboard_task(void)
{
	// ...

+    user_timer();
}

+__attribute__((weak))
+void user_timer() {
+}
// ...
```
